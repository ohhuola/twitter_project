{% extends "base.html" %}
{% block head %}
<script src="{{ url_for('static', filename='js/echarts.min.js') }}"></script>
{% endblock %}
{% block title %}用户管理{% endblock %}


{% block navbar %}
<section class="content-header">
    <h1>用户管理操作</h1>
    <ol class="breadcrumb">
        <li><i class="fa fa-dashboard"></i> 当前位置</li>
        <li class="active">详细信息</li>
{#        <li class="active">通知方式配置</li>#}
    </ol>
</section>
{% endblock %}

{% block content %}
    <div class="col-md-4">
          <!-- Widget: user widget style 1 -->
          <div class="box box-widget widget-user-2">
            <!-- Add the bg color to the header using any of the bg-* classes -->
            <div class="widget-user-header bg-light-blue">
              <div class="widget-user-image">
                <img class="img-circle" src="../static/images/user1.png" alt="User Avatar">
              </div>
              <!-- /.widget-user-image -->
              <h3 class="widget-user-username">{{ form.user_name }}</h3>
              <h5 class="widget-user-desc">{{ form.user_nick }}</h5>
            </div>
            <div class="box-footer no-padding">
              <ul class="nav nav-stacked">
                <li><a href="#">工作<span class="pull-right badge bg-gray">打铁匠</span></a></li>
                <li><a href="#">地理位置<span class="pull-right badge bg-blue">洛杉矶</span></a></li>
                <li><a href="#">追随者<span class="pull-right badge bg-aqua">22K</span></a></li>
                <li><a href="#">总计推特数量<span class="pull-right badge bg-green">{{ form.number_of_tweets }}</span></a></li>
                <li><a href="#">最近活跃时间 <span class="pull-right badge bg-red">{{ form.recent_active_time }}</span></a></li>
              </ul>
            </div>
          </div>
          <!-- /.widget-user -->
        </div>

    <div class="col-md-8 ">
          <!-- Bar chart -->
          <div class="box box-primary">
            <div class="box-header with-border">
              <i class="fa fa-bar-chart-o"></i>

              <h3 class="box-title">数据分析图样</h3>

{#              <div class="box-tools pull-right">#}
{#                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>#}
{#                </button>#}
{#                <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>#}
{#              </div>#}
            </div>
            <div class="box-body">
              <div class="col-md-7" id="pieChart" style="height: 240px;"></div>
              <div class="col-md-5" id="MentionPieChart" style="height:240px;"></div>
            </div>
            <!-- /.box-body-->
          </div>
    </div>
    <div class="row">
    <div class="col-md-12">
          <div class="box box-primary">
            <div class="box-header with-border">
              <h3 class="box-title">链接</h3>
{#                <div class="box-tools pull-right">#}
{#                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>#}
{#                </button>#}
{#                <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>#}
{#              </div>#}
              <!-- /.box-tools -->
            </div>
            <!-- /.box-header -->
            <div class="box-body no-padding">

              <div class="table-responsive mailbox-messages">
                <table class="table table-hover table-striped">
                  <tbody>
                  {% for i in urls %}
                  <tr>
                      <td class="mailbox-star"><a href="#"><i class="fa fa-star text-yellow"></i></a></td>
                      <td class="mailbox-subject" ><b><a style="text-decoration: None"href="{{ i }}">{{ i }}</a></b></td>
                        <td class="mailbox-attachment"></td>
                  </tr>
                  {% endfor %}

                  </tbody>
                </table>
                <!-- /.table -->
              </div>
              <!-- /.mail-box-messages -->
            </div>
          </div>
    </div>
    <div class="row">
        <div class="col-md-12">
          <!-- The time line -->
          <ul class="timeline">
            <!-- timeline time label -->
            <li class="time-label">
                  <span class="bg-red">
                    10 Dec. 2016
                  </span>
            </li>
            <!-- /.timeline-label -->
            <!-- timeline item -->
            {% for key,value in tweet.items()  %}
                <li>
                  <i class="fa  fa-twitter bg-blue"></i>
                  <div class="timeline-item">
                    <span class="time"><i class="fa fa-clock-o"></i> {{ value }}</span>
                    <div class="timeline-body">
                      {{ key }}
                    </div>
                    <div class="timeline-footer">
                      <a class="btn btn-primary btn-xs">Read more</a>
                      <a class="btn btn-danger btn-xs">Delete</a>
                    </div>
                  </div>
                </li>
            {% endfor %}
            <!-- END timeline item -->

          </ul>
        </div>
        <!-- /.col -->
      </div>
      <!-- /.row -->

{% endblock %}
{% block scripts %}
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('pieChart'));


        var test={{ tags|safe }};
        var seriesData = [];
        var list=[];
        for (var key in test){
            seriesData.push({value: test[key], name: key});
            list.push(test[key]);
        }

        // 指定图表的配置项和数据
        var option = {
            title:{
                text:'使用标签'
            },
             tooltip: {
        trigger: 'item',
        formatter: "{a} <br/>{b}: {c} ({d}%)"
    },
    legend: {

        orient: 'vertical',
        x: 'left',
        data:list
    },

    series: [
        {
            name:'使用次数',
            type:'pie',
            radius: '55%',
            center: ['40%', '50%'],
            itemStyle: {
                emphasis: {
                    shadowBlur: 10,
                    shadowOffsetX: 0,
                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                }
            },
            data:seriesData

        }
    ]
        };

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);

        var mention_chart = echarts.init(document.getElementById('MentionPieChart'));

        var origin_namesT={{ friends  | safe }};
        var seriesMentionData = [];
        var MentionList=[];
        for (var key in origin_namesT){
            seriesMentionData.push({value: origin_namesT[key], name: key});
            MentionList.push(origin_namesT[key]);
          }
        option = {

            tooltip : {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },

            legend: {
                x : 'center',
                y : 'bottom',
                data:MentionList
            },

            labelLine: {
                normal: {
                    lineStyle: {
                        color: 'rgba(255, 255, 255, 0.3)'
                    },
                    smooth: 0.2,
                    length: 4,
                    length2: 1
                }
            },

            calculable : true,

            series : [
                {
                    name:'@的人',
                    type:'pie',
                    radius : [20, 70],
                    center : ['50%', '50%'],
                    roseType : 'area',
                    data:seriesMentionData
                }
            ]
        };
    mention_chart.setOption(option);


    </script>


{%  endblock %}